---
title: "Tips for using Git and GitHub"
author: "Tom Palmer"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    # toc: true
    # toc_float:
    #   collapsed: false
    #   smooth_scroll: false
    # toc_depth: 2
    code_download: true
    code_folding: show
    anchor_sections: true
---

```{r setup, include=FALSE}
# require("Hmisc")
knitr::opts_chunk$set(echo = FALSE)
```

<!-- `r Hmisc::hidingTOC(levels = 2)` -->

## Introduction

The following is intended as a set of tips for people learning how to use Git and GitHub.

## Tips {.tabset .tabset-pills .tabset-fade}

### Git

- Git is commonly referred to as version control software
- It is better described as a content tracking software
  - It takes the cryptographic hash of the contents of your files
  - Git does not care about when your file was last saved
  - Git cares about the contents of your files
  - This differs to OneDrive/SharePoint/Google Drive which are file synchronisation systems
- Git was written to allow developers work on the source code of the Linux kernel
- The `.git` folder
  - When you initialise a directory the `.git` folder is created
  - This contains all of Git's files it uses to track the contents of your files
  - Confuingly GitHub hides the `.git` folder from view
    ```{r}
    knitr::include_graphics("img/")
    ```

### Git grammar

- Follow the tidyverse recommendations about commit messages from [here](https://style.tidyverse.org/gitgithub.html)

### Installing Git

- Windows
- macOS comes with an out-dated version of Git, so use the Homebrew version instead by installing Homebrew, see instructions [here](https://brew.sh/), then running in Terminal  
```
brew upgrade
brew install git
```

### Files to ignore

- You should not commit all files into your repo
- The `.gitignore` file is a list of files and folders for Git to ignore
- Common files to ignore are
  - `.Rhistory`
  - `.DS_Store`
- I recommend not placing your Git repos in a location that is sync'd by either OneDrive or Google Drive (they are very different syncing technologies)

### GitHub intro

### GitHub PAT for R

- To create a GitHub PAT to be allowed more downloads from GitHub per hour run in R  
```{r, echo=TRUE, eval=FALSE}
install.packages("usethis")
library(usethis)
create_github_token()
```

### GitHub Desktop

- Use a visual git editor, e.g. [GitHub Desktop](https://desktop.github.com/), there are many other good ones
- Work in a new branch, especially if working with others
  - Then merge into main/master when you're sure your changes are what you want
- When coding, I recommend making your changes 
  - Then select relevant changed lines 
  - Use sensible commit messages, i.e., do not make one massive commit with commit message "Edits"!  
```{r}
knitr::include_graphics("img/github-desktop-select-lines.png")
```  

### GitHub CLI

- CLI stands for command line interface for operating GitHub
- I don't recommend this

### Workflow in an OpenSAFELY repo



