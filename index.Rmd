---
title: "Tips for using Git and GitHub"
author: "Tom Palmer"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    # toc: true
    # toc_float:
    #   collapsed: false
    #   smooth_scroll: false
    # toc_depth: 2
    code_download: true
    code_folding: show
    anchor_sections: true
---

```{r setup, include=FALSE}
# require("Hmisc")
knitr::opts_chunk$set(echo = FALSE)
```

<!-- `r Hmisc::hidingTOC(levels = 2)` -->

## Introduction

The following is intended as a set of tips for people learning how to use Git and GitHub.

Of course there are many excellent guides online, e.g.,

-	Intro to GitHub https://guides.github.com/activities/hello-world/
- GitHub videos https://www.youtube.com/githubguides
- Hadley Wickham https://r-pkgs.org/git.html
- Jenny Bryan - Git and GitHub with R https://happygitwithr.com/

These tips are meant to supplement them.

## Tips {.tabset .tabset-pills .tabset-fade}

### Git intro

- Git is commonly referred to as version control software
- It is better described as a content tracking software
  - It takes the cryptographic hash of the contents of your files
  - Git does not care about when your file was last saved
  - Git cares about the contents of your files
  - This differs to OneDrive/SharePoint/Google Drive which are file synchronisation systems
- Git was written to allow developers work on the source code of the Linux kernel
  - It was designed to work with text files
  - But it can be intimdating and we can get Git errors  
    ```{r}
    knitr::include_graphics("https://imgs.xkcd.com/comics/git.png")
    ```

- The `.git` folder
  - When you initialise a directory the `.git` folder is created
  - This contains all of Git's files it uses to track the contents of your files
  - Confuingly GitHub hides the `.git` folder from view - here it is on my computer  
    ```{r}
    knitr::include_graphics("img/windows-explorer-repo.png")
    ```
  - We see it's omitted from the GitHub web interface  
    ```{r}
    knitr::include_graphics("img/repo-github-view.png")
    ```
  - Here are its contents - never edit these manually  
    ```{r}
    knitr::include_graphics("img/dot-git-folder-contents.png")
    ```

### Git grammar

- Follow the tidyverse and standard recommendations about commit messages from [here](https://style.tidyverse.org/gitgithub.html) and [here](https://chris.beams.io/posts/git-commit/)

### Installing Git

- Windows
- macOS comes with an out-dated version of Git, so use the Homebrew version instead by installing Homebrew, see instructions [here](https://brew.sh/), then running in Terminal  
```
brew upgrade
brew install git
```

### Files to ignore

- You should not commit all files into your repo
- The `.gitignore` file is a list of files and folders for Git to ignore
- Common files to ignore are
  - `.Rhistory`
  - `.DS_Store`
- I recommend not placing your Git repos in a location that is sync'd by either OneDrive or Google Drive (they are very different syncing technologies)

### GitHub intro

### GitHub PAT for R

- To create a GitHub PAT to be allowed more downloads from GitHub per hour run in R  
```{r, echo=TRUE, eval=FALSE}
install.packages("usethis")
library(usethis)
create_github_token()
```

### GitHub Desktop

- Use a visual git editor, e.g. [GitHub Desktop](https://desktop.github.com/), there are many other good ones
- Work in a new branch, especially if working with others
  - Then merge into main/master when you're sure your changes are what you want
- When coding, I recommend making your changes 
  - Then select relevant changed lines 
  - Use sensible commit messages, i.e., do not make one massive commit with commit message "Edits"!  
```{r}
knitr::include_graphics("img/github-desktop-select-lines.png")
```  

### GitHub CLI

- CLI stands for command line interface for operating GitHub
- I don't recommend this

### Workflow with an OS GitHub repo



### Standard GitHub workflow

- Only fork a public repo if you intend to send a pull request back to it
- Fork the other person's repo
- Clone it to your machine
- Work in a new branch (not on `master`/`main`)
- When your finished push branch upto GitHub (this is to your fork)
- Create pull request (from your new branch) back to the `master`/`main` branch of the original repo
